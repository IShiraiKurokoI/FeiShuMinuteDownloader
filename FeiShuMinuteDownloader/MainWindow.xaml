<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="FeiShuMinuteDownloader.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FeiShuMinuteDownloader"
    xmlns:dataModels="using:FeiShuMinuteDownloader.models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:FeiShuMinuteDownloader.converters"
    mc:Ignorable="d">
    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.Resources>
            <converters:TimestampToDateConverter x:Key="TimestampToDateConverter"/>
        </Grid.Resources>
        <WebView2 x:Name="LoginWebview" 
                  Source="https://bytedance.feishu.cn/minutes/me" 
                  HorizontalAlignment="Stretch" 
                  VerticalAlignment="Stretch" 
                  CoreWebView2Initialized="LoginWebview_CoreWebView2Initialized" 
                  NavigationCompleted="LoginWebview_NavigationCompleted"/>
        <StackPanel Orientation="Horizontal" Margin="20,20,20,0" HorizontalAlignment="Stretch" VerticalAlignment="Top" Background="LightGray" Height="40">
            <TextBlock Text="选择" Width="50" Margin="10,0"/>
            <TextBlock Text="名称"  Margin="10,0"/>
            <TextBlock Text="开始时间"  Margin="10,0"/>
            <TextBlock Text="结束时间"  Margin="10,0"/>
            <TextBlock Text="所有者"  Margin="10,0"/>
        </StackPanel>
        <ListBox x:Name="RecordsList" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="20,60,20,60">
            <ListBox.ItemTemplate>
                <DataTemplate x:DataType="dataModels:Record">
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <CheckBox Width="50" Height="20" Margin="10,0"/>
                        <TextBlock Text="{x:Bind topic}" Width="200" Margin="10,0"/>
                        <TextBlock Text="{x:Bind start_time}" Width="200" Margin="10,0"/>
                        <TextBlock Text="{x:Bind stop_time}" Width="200" Margin="10,0"/>
                        <TextBlock Text="{x:Bind owner_name}" Width="200" Margin="10,0"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Button Content="Download Selected" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,20,20" Click="DownloadSelected_Click"/>
    </Grid>
</Window>
